{"config":{"lang":["en","es"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"CoreBrain API","text":"<p>Plataforma de IA que conecta tus datos con la inteligencia avanzada de modelos de lenguaje.</p> <p>CoreBrain es una API que permite a los desarrolladores conectar sus bases de datos MongoDB con modelos de lenguaje como Claude de Anthropic para crear experiencias conversacionales poderosas que pueden analizar, interpretar y responder preguntas sobre los datos almacenados.</p>"},{"location":"#caracteristicas-principales","title":"Caracter\u00edsticas principales","text":""},{"location":"#inteligencia-avanzada","title":"\ud83e\udde0 Inteligencia avanzada","text":"<p>Potenciado por Claude de Anthropic, CoreBrain ofrece una comprensi\u00f3n profunda del lenguaje natural y capacidad para trabajar con instrucciones complejas.</p>"},{"location":"#consultas-en-lenguaje-natural","title":"\ud83d\udd0d Consultas en lenguaje natural","text":"<p>Permite a los usuarios consultar bases de datos MongoDB utilizando lenguaje natural, sin necesidad de conocer la sintaxis de las consultas.</p>"},{"location":"#seguridad-por-diseno","title":"\ud83d\udee1\ufe0f Seguridad por dise\u00f1o","text":"<p>Sistema de permisos granular que garantiza que los usuarios solo puedan acceder a los datos para los que tienen autorizaci\u00f3n.</p>"},{"location":"#analitica-integrada","title":"\ud83d\udcca Anal\u00edtica integrada","text":"<p>Seguimiento detallado del uso, rendimiento y costos para optimizar la integraci\u00f3n.</p>"},{"location":"#facil-integracion","title":"\ud83d\udd04 F\u00e1cil integraci\u00f3n","text":"<p>SDK disponible para m\u00faltiples lenguajes y plataformas, con opciones para JavaScript, Python y m\u00e1s.</p>"},{"location":"#casos-de-uso","title":"Casos de uso","text":"<p>CoreBrain es ideal para:</p> <ul> <li>Asistentes internos para empresas que necesitan responder preguntas sobre datos de negocios</li> <li>Aplicaciones de an\u00e1lisis de datos que requieren una interfaz conversacional</li> <li>Chatbots de soporte que deben consultar bases de datos para resolver problemas</li> <li>Herramientas de automatizaci\u00f3n que necesitan interpretar datos y tomar decisiones</li> <li>Paneles de control interactivos donde los usuarios pueden hacer preguntas sobre m\u00e9tricas</li> </ul>"},{"location":"#arquitectura","title":"Arquitectura","text":"<p>CoreBrain consta de tres componentes principales:</p> <ol> <li>api.corebrain.ai: Backend con FastAPI que procesa mensajes y consultas, conectando con MongoDB y Anthropic.</li> <li>dashboard.corebrain.ai: Interfaz de administraci\u00f3n para usuarios.</li> <li>sdk.corebrain.ai: SDK para la integraci\u00f3n en aplicaciones cliente.</li> </ol>"},{"location":"#primeros-pasos","title":"Primeros pasos","text":"<p>Para comenzar a utilizar CoreBrain, sigue estos pasos:</p> <ol> <li>Reg\u00edstrate para obtener una cuenta.</li> <li>Crea una API key desde tu dashboard.</li> <li>Instala el SDK en tu aplicaci\u00f3n.</li> <li>Comienza a consultar tus datos con lenguaje natural.</li> </ol> <pre><code>// Ejemplo de integraci\u00f3n con JavaScript\nimport { CoreBrain } from 'corebrain-sdk';\n\nconst client = new CoreBrain({\n  apiKey: 'tu_api_key',\n});\n\n// Crea una conversaci\u00f3n\nconst conversation = await client.conversations.create({\n  title: 'An\u00e1lisis de ventas'\n});\n\n// Env\u00eda un mensaje y recibe una respuesta\nconst response = await client.messages.send({\n  conversationId: conversation.id,\n  content: '\u00bfCu\u00e1les fueron nuestras ventas totales del mes pasado?'\n});\n\nconsole.log(response.aiResponse.content);\n</code></pre>"},{"location":"#proximos-pasos","title":"Pr\u00f3ximos pasos","text":"<ul> <li>Explora la documentaci\u00f3n de la API</li> <li>Aprende a configurar permisos</li> <li>Descubre ejemplos de integraci\u00f3n</li> <li>\u00danete a nuestra comunidad de desarrolladores</li> </ul>"},{"location":"#licencia","title":"Licencia","text":"<p>CoreBrain se distribuye bajo la Licencia MIT.</p> <p>\u00bfTienes alguna pregunta? Cont\u00e1ctanos o revisa nuestras Preguntas frecuentes.</p>"},{"location":"api-reference/analytics/","title":"Anal\u00edticas","text":"<p>CoreBrain proporciona endpoints para obtener estad\u00edsticas de uso y rendimiento.</p>"},{"location":"api-reference/analytics/#endpoints","title":"Endpoints","text":""},{"location":"api-reference/analytics/#obtener-estadisticas-de-uso","title":"Obtener estad\u00edsticas de uso","text":"<pre><code>GET /api/analytics/usage\n</code></pre> <p>Par\u00e1metros de consulta: - <code>days</code> - N\u00famero de d\u00edas a analizar (defecto: 30) - <code>group_by</code> - Agrupar por 'day', 'week' o 'month' (defecto: 'day')</p> <p>Encabezados: <pre><code>X-API-Key: tu_api_key_aqu\u00ed\n</code></pre></p> <p>Respuesta exitosa (200): <pre><code>{\n  \"start_date\": \"2025-02-21T00:00:00Z\",\n  \"end_date\": \"2025-03-23T00:00:00Z\",\n  \"group_by\": \"day\",\n  \"stats\": [\n    {\n      \"date\": \"2025-03-01\",\n      \"total\": 256,\n      \"events\": {\n        \"message_processed\": 187,\n        \"nl_query_processed\": 69\n      }\n    },\n    {\n      \"date\": \"2025-03-02\",\n      \"total\": 312,\n      \"events\": {\n        \"message_processed\": 245,\n        \"nl_query_processed\": 67\n      }\n    }\n  ]\n}\n</code></pre></p>"},{"location":"api-reference/analytics/#obtener-estadisticas-de-costos","title":"Obtener estad\u00edsticas de costos","text":"<pre><code>GET /api/analytics/costs\n</code></pre> <p>Par\u00e1metros de consulta: - <code>days</code> - N\u00famero de d\u00edas a analizar (defecto: 30) - <code>group_by</code> - Agrupar por 'day', 'week' o 'month' (defecto: 'day')</p> <p>Encabezados: <pre><code>X-API-Key: tu_api_key_aqu\u00ed\n</code></pre></p> <p>Respuesta exitosa (200): <pre><code>{\n  \"start_date\": \"2025-02-21T00:00:00Z\",\n  \"end_date\": \"2025-03-23T00:00:00Z\",\n  \"group_by\": \"day\",\n  \"total_usd\": 45.67,\n  \"costs\": [\n    {\n      \"date\": \"2025-03-01\",\n      \"tokens\": {\n        \"input\": 125670,\n        \"output\": 74320,\n        \"total\": 199990\n      },\n      \"usd\": {\n        \"input\": 1.88,\n        \"output\": 5.57,\n        \"total\": 7.45\n      }\n    },\n    {\n      \"date\": \"2025-03-02\",\n      \"tokens\": {\n        \"input\": 145230,\n        \"output\": 82450,\n        \"total\": 227680\n      },\n      \"usd\": {\n        \"input\": 2.18,\n        \"output\": 6.18,\n        \"total\": 8.36\n      }\n    }\n  ]\n}\n</code></pre></p>"},{"location":"api-reference/analytics/#obtener-consultas-populares","title":"Obtener consultas populares","text":"<pre><code>GET /api/analytics/top-queries\n</code></pre> <p>Par\u00e1metros de consulta: - <code>limit</code> - N\u00famero m\u00e1ximo de consultas a retornar (defecto: 10) - <code>days</code> - N\u00famero de d\u00edas a analizar (defecto: 7)</p> <p>Encabezados: <pre><code>X-API-Key: tu_api_key_aqu\u00ed\n</code></pre></p> <p>Respuesta exitosa (200): <pre><code>[\n  {\n    \"query\": \"\u00bfCu\u00e1les son los productos m\u00e1s vendidos?\",\n    \"count\": 45,\n    \"collections\": [\"products\"],\n    \"last_used\": \"2025-03-23T10:15:30Z\"\n  },\n  {\n    \"query\": \"\u00bfQui\u00e9nes son nuestros mejores clientes?\",\n    \"count\": 32,\n    \"collections\": [\"customers\", \"orders\"],\n    \"last_used\": \"2025-03-22T15:45:12Z\"\n  }\n]\n</code></pre></p>"},{"location":"api-reference/authentication/","title":"Autenticaci\u00f3n","text":"<p>CoreBrain API proporciona dos m\u00e9todos de autenticaci\u00f3n:</p> <ol> <li>API Keys: Para integraci\u00f3n en aplicaciones cliente</li> <li>JWT (JSON Web Tokens): Para el dashboard y operaciones administrativas</li> </ol>"},{"location":"api-reference/authentication/#api-keys","title":"API Keys","text":"<p>Las API Keys son el m\u00e9todo principal para autenticar solicitudes a la API desde aplicaciones cliente. Se env\u00edan a trav\u00e9s del encabezado HTTP <code>X-API-Key</code>.</p>"},{"location":"api-reference/authentication/#formato","title":"Formato","text":"<p>Las API Keys tienen el siguiente formato:</p> <ul> <li><code>sk_live_XXXXXXXXXXXXXXXXXXXX</code> - Para uso en producci\u00f3n</li> <li><code>sk_test_XXXXXXXXXXXXXXXXXXXX</code> - Para desarrollo y pruebas</li> </ul>"},{"location":"api-reference/authentication/#niveles-de-permiso","title":"Niveles de permiso","text":"<p>Cada API Key tiene un nivel de permiso asociado:</p> Nivel Descripci\u00f3n <code>read</code> Solo lectura (consultas) <code>write</code> Lectura + escritura (mensajes, conversaciones) <code>admin</code> Acceso completo (incluye gesti\u00f3n de API Keys)"},{"location":"api-reference/authentication/#endpoints","title":"Endpoints","text":""},{"location":"api-reference/authentication/#validar-api-key","title":"Validar API Key","text":"<pre><code>GET /api/auth/validate\n</code></pre> <p>Encabezados: <pre><code>X-API-Key: tu_api_key_aqu\u00ed\n</code></pre></p> <p>Respuesta exitosa (200): <pre><code>{\n  \"valid\": true,\n  \"level\": \"write\",\n  \"name\": \"API Key para App\"\n}\n</code></pre></p>"},{"location":"api-reference/authentication/#crear-api-key-requiere-autenticacion-jwt-admin","title":"Crear API Key (requiere autenticaci\u00f3n JWT Admin)","text":"<pre><code>POST /api/auth/api-keys\n</code></pre> <p>Cuerpo: <pre><code>{\n  \"name\": \"API Key para App M\u00f3vil\",\n  \"user_id\": \"usr_123456789\",\n  \"level\": \"write\",\n  \"allowed_domains\": [\"miapp.com\", \"*.miapp.com\"]\n}\n</code></pre></p> <p>Respuesta exitosa (201): <pre><code>{\n  \"id\": \"key_123456789\",\n  \"name\": \"API Key para App M\u00f3vil\",\n  \"level\": \"write\",\n  \"key\": \"sk_live_abcdefghijklmnopqrst\",\n  \"created_at\": \"2025-03-23T12:34:56Z\",\n  \"expires_at\": null,\n  \"allowed_domains\": [\"miapp.com\", \"*.miapp.com\"]\n}\n</code></pre></p>"},{"location":"api-reference/authentication/#revocar-api-key-requiere-autenticacion-jwt-admin","title":"Revocar API Key (requiere autenticaci\u00f3n JWT Admin)","text":"<pre><code>DELETE /api/auth/api-keys/{api_key_id}\n</code></pre> <p>Respuesta exitosa (200): <pre><code>{\n  \"message\": \"API key revocada correctamente\"\n}\n</code></pre></p>"},{"location":"api-reference/authentication/#jwt-json-web-tokens","title":"JWT (JSON Web Tokens)","text":"<p>Los tokens JWT se utilizan para autenticar usuarios en el dashboard y realizar operaciones administrativas. Se env\u00edan a trav\u00e9s del encabezado HTTP <code>Authorization: Bearer {token}</code>.</p>"},{"location":"api-reference/authentication/#obtener-token-login","title":"Obtener token (Login)","text":"<pre><code>POST /api/auth/token\n</code></pre> <p>Cuerpo (formato form-urlencoded): <pre><code>username=usuario@ejemplo.com&amp;password=contrase\u00f1a_secreta\n</code></pre></p> <p>Respuesta exitosa (200): <pre><code>{\n  \"access_token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\",\n  \"token_type\": \"bearer\",\n  \"user_id\": \"usr_123456789\",\n  \"email\": \"usuario@ejemplo.com\",\n  \"name\": \"Nombre del Usuario\",\n  \"role\": \"admin\"\n}\n</code></pre></p>"},{"location":"api-reference/authentication/#crear-usuario-requiere-autenticacion-jwt-admin","title":"Crear usuario (requiere autenticaci\u00f3n JWT Admin)","text":"<pre><code>POST /api/auth/users\n</code></pre> <p>Cuerpo: <pre><code>{\n  \"email\": \"nuevo@usuario.com\",\n  \"name\": \"Nuevo Usuario\",\n  \"password\": \"contrase\u00f1a_segura\"\n}\n</code></pre></p> <p>Respuesta exitosa (201): <pre><code>{\n  \"id\": \"usr_987654321\",\n  \"email\": \"nuevo@usuario.com\",\n  \"name\": \"Nuevo Usuario\",\n  \"created_at\": \"2025-03-23T12:34:56Z\",\n  \"role\": \"user\"\n}\n</code></pre></p>"},{"location":"api-reference/authentication/#manejo-de-errores-de-autenticacion","title":"Manejo de errores de autenticaci\u00f3n","text":""},{"location":"api-reference/authentication/#api-key-invalida","title":"API Key inv\u00e1lida","text":"<p>Respuesta (401): <pre><code>{\n  \"detail\": \"API key inv\u00e1lida o expirada\"\n}\n</code></pre></p>"},{"location":"api-reference/authentication/#token-jwt-invalido-o-expirado","title":"Token JWT inv\u00e1lido o expirado","text":"<p>Respuesta (401): <pre><code>{\n  \"detail\": \"No se pudo validar credenciales\",\n  \"headers\": {\n    \"WWW-Authenticate\": \"Bearer\"\n  }\n}\n</code></pre></p>"},{"location":"api-reference/authentication/#permisos-insuficientes","title":"Permisos insuficientes","text":"<p>Respuesta (403): <pre><code>{\n  \"detail\": \"No tienes permisos suficientes para esta operaci\u00f3n\"\n}\n</code></pre></p>"},{"location":"api-reference/conversations/","title":"Conversaciones","text":"<p>Las conversaciones son hilos de mensajes entre el usuario y la IA. Cada conversaci\u00f3n tiene un identificador \u00fanico y puede contener m\u00faltiples mensajes.</p>"},{"location":"api-reference/conversations/#endpoints","title":"Endpoints","text":""},{"location":"api-reference/conversations/#crear-conversacion","title":"Crear conversaci\u00f3n","text":"<pre><code>POST /api/chat/conversations\n</code></pre> <p>Encabezados: <pre><code>X-API-Key: tu_api_key_aqu\u00ed\nContent-Type: application/json\n</code></pre></p> <p>Cuerpo: <pre><code>{\n  \"title\": \"An\u00e1lisis de ventas\",\n  \"metadata\": {\n    \"source\": \"app_mobile\",\n    \"user_reference\": \"user_12345\"\n  }\n}\n</code></pre></p> <p>Respuesta exitosa (201): <pre><code>{\n  \"id\": \"conv_123456789\",\n  \"title\": \"An\u00e1lisis de ventas\",\n  \"created_at\": \"2025-03-23T12:34:56Z\",\n  \"updated_at\": \"2025-03-23T12:34:56Z\",\n  \"last_message_at\": null,\n  \"message_count\": 0\n}\n</code></pre></p>"},{"location":"api-reference/conversations/#obtener-conversacion","title":"Obtener conversaci\u00f3n","text":"<pre><code>GET /api/chat/conversations/{conversation_id}\n</code></pre> <p>Par\u00e1metros de consulta: - <code>messages_limit</code> - Cantidad m\u00e1xima de mensajes a retornar (defecto: 10)</p> <p>Encabezados: <pre><code>X-API-Key: tu_api_key_aqu\u00ed\n</code></pre></p> <p>Respuesta exitosa (200): <pre><code>{\n  \"id\": \"conv_123456789\",\n  \"title\": \"An\u00e1lisis de ventas\",\n  \"created_at\": \"2025-03-23T12:34:56Z\",\n  \"updated_at\": \"2025-03-23T12:34:56Z\",\n  \"last_message_at\": \"2025-03-23T12:35:30Z\",\n  \"message_count\": 2,\n  \"messages\": [\n    {\n      \"id\": \"msg_123456789\",\n      \"content\": \"\u00bfCu\u00e1ntas ventas tuvimos el mes pasado?\",\n      \"is_user\": true,\n      \"created_at\": \"2025-03-23T12:35:00Z\",\n      \"metadata\": {}\n    },\n    {\n      \"id\": \"msg_987654321\",\n      \"content\": \"El mes pasado tuvieron un total de 1,254 ventas por un valor total de $45,678.\",\n      \"is_user\": false,\n      \"created_at\": \"2025-03-23T12:35:30Z\",\n      \"metadata\": {\n        \"model\": \"claude-3-opus-20240229\",\n        \"tokens\": {\n          \"input\": 22,\n          \"output\": 24\n        }\n      }\n    }\n  ]\n}\n</code></pre></p>"},{"location":"api-reference/conversations/#listar-conversaciones","title":"Listar conversaciones","text":"<pre><code>GET /api/chat/conversations\n</code></pre> <p>Par\u00e1metros de consulta: - <code>limit</code> - Cantidad m\u00e1xima de conversaciones (defecto: 20) - <code>offset</code> - Desplazamiento para paginaci\u00f3n (defecto: 0)</p> <p>Encabezados: <pre><code>X-API-Key: tu_api_key_aqu\u00ed\n</code></pre></p> <p>Respuesta exitosa (200): <pre><code>{\n  \"conversations\": [\n    {\n      \"id\": \"conv_123456789\",\n      \"title\": \"An\u00e1lisis de ventas\",\n      \"created_at\": \"2025-03-23T12:34:56Z\",\n      \"updated_at\": \"2025-03-23T12:35:30Z\",\n      \"last_message_at\": \"2025-03-23T12:35:30Z\",\n      \"message_count\": 2\n    },\n    {\n      \"id\": \"conv_987654321\",\n      \"title\": \"Soporte t\u00e9cnico\",\n      \"created_at\": \"2025-03-23T10:15:30Z\",\n      \"updated_at\": \"2025-03-23T10:20:45Z\",\n      \"last_message_at\": \"2025-03-23T10:20:45Z\",\n      \"message_count\": 5\n    }\n  ],\n  \"count\": 2\n}\n</code></pre></p>"},{"location":"api-reference/conversations/#actualizar-conversacion","title":"Actualizar conversaci\u00f3n","text":"<pre><code>PATCH /api/chat/conversations/{conversation_id}\n</code></pre> <p>Encabezados: <pre><code>X-API-Key: tu_api_key_aqu\u00ed\nContent-Type: application/json\n</code></pre></p> <p>Cuerpo: <pre><code>{\n  \"title\": \"An\u00e1lisis de ventas Q1 2025\"\n}\n</code></pre></p> <p>Respuesta exitosa (200): <pre><code>{\n  \"id\": \"conv_123456789\",\n  \"title\": \"An\u00e1lisis de ventas Q1 2025\",\n  \"created_at\": \"2025-03-23T12:34:56Z\",\n  \"updated_at\": \"2025-03-23T13:45:30Z\",\n  \"last_message_at\": \"2025-03-23T12:35:30Z\",\n  \"message_count\": 2\n}\n</code></pre></p>"},{"location":"api-reference/conversations/#eliminar-conversacion","title":"Eliminar conversaci\u00f3n","text":"<pre><code>DELETE /api/chat/conversations/{conversation_id}\n</code></pre> <p>Encabezados: <pre><code>X-API-Key: tu_api_key_aqu\u00ed\n</code></pre></p> <p>Respuesta exitosa (200): <pre><code>{\n  \"message\": \"Conversaci\u00f3n eliminada correctamente\"\n}\n</code></pre></p>"},{"location":"api-reference/conversations/#docsapi-referencemessagesmd","title":"docs/api-reference/messages.md","text":""},{"location":"api-reference/conversations/#mensajes","title":"Mensajes","text":"<p>Los mensajes son el componente principal de interacci\u00f3n con la IA. Un mensaje del usuario genera una respuesta de la IA utilizando el contexto de la conversaci\u00f3n.</p>"},{"location":"api-reference/conversations/#endpoints_1","title":"Endpoints","text":""},{"location":"api-reference/conversations/#enviar-mensaje","title":"Enviar mensaje","text":"<pre><code>POST /api/chat/conversations/{conversation_id}/messages\n</code></pre> <p>Encabezados: <pre><code>X-API-Key: tu_api_key_aqu\u00ed\nContent-Type: application/json\n</code></pre></p> <p>Cuerpo: <pre><code>{\n  \"content\": \"\u00bfCu\u00e1ntos usuarios activos tuvimos la semana pasada?\",\n  \"conversation_id\": \"conv_123456789\",\n  \"metadata\": {\n    \"source\": \"dashboard_analytics\",\n    \"user_locale\": \"es-MX\"\n  }\n}\n</code></pre></p> <p>Respuesta exitosa (200): <pre><code>{\n  \"user_message\": {\n    \"id\": \"msg_123456789\",\n    \"content\": \"\u00bfCu\u00e1ntos usuarios activos tuvimos la semana pasada?\",\n    \"is_user\": true,\n    \"created_at\": \"2025-03-23T14:15:30Z\",\n    \"metadata\": {\n      \"source\": \"dashboard_analytics\",\n      \"user_locale\": \"es-MX\"\n    }\n  },\n  \"ai_response\": {\n    \"id\": \"msg_987654321\",\n    \"content\": \"La semana pasada tuvieron 2,543 usuarios activos, lo que representa un aumento del 15% con respecto a la semana anterior.\",\n    \"model\": \"claude-3-opus-20240229\",\n    \"created_at\": \"2025-03-23T14:15:32Z\",\n    \"tokens\": {\n      \"input\": 35,\n      \"output\": 28\n    },\n    \"processing_time\": 1.8,\n    \"metadata\": {\n      \"anthropic_version\": \"0.5.0\",\n      \"model\": \"claude-3-opus-20240229\",\n      \"queries_executed\": 1,\n      \"cost\": {\n        \"input_usd\": 0.000525,\n        \"output_usd\": 0.0021,\n        \"total_usd\": 0.002625\n      }\n    }\n  }\n}\n</code></pre></p>"},{"location":"api-reference/conversations/#obtener-mensajes-de-una-conversacion","title":"Obtener mensajes de una conversaci\u00f3n","text":"<pre><code>GET /api/chat/conversations/{conversation_id}/messages\n</code></pre> <p>Par\u00e1metros de consulta: - <code>limit</code> - Cantidad m\u00e1xima de mensajes (defecto: 50) - <code>before</code> - ID del mensaje antes del cual obtener mensajes (para paginaci\u00f3n)</p> <p>Encabezados: <pre><code>X-API-Key: tu_api_key_aqu\u00ed\n</code></pre></p> <p>Respuesta exitosa (200): <pre><code>{\n  \"messages\": [\n    {\n      \"id\": \"msg_123456789\",\n      \"content\": \"\u00bfCu\u00e1ntos usuarios activos tuvimos la semana pasada?\",\n      \"is_user\": true,\n      \"created_at\": \"2025-03-23T14:15:30Z\",\n      \"metadata\": {\n        \"source\": \"dashboard_analytics\"\n      }\n    },\n    {\n      \"id\": \"msg_987654321\",\n      \"content\": \"La semana pasada tuvieron 2,543 usuarios activos, lo que representa un aumento del 15% con respecto a la semana anterior.\",\n      \"is_user\": false,\n      \"created_at\": \"2025-03-23T14:15:32Z\",\n      \"metadata\": {\n        \"model\": \"claude-3-opus-20240229\",\n        \"tokens\": {\n          \"input\": 35,\n          \"output\": 28\n        }\n      }\n    }\n  ],\n  \"count\": 2\n}\n</code></pre></p>"},{"location":"api-reference/database/","title":"Base de datos","text":"<p>CoreBrain permite ejecutar consultas en lenguaje natural sobre bases de datos MongoDB conectadas.</p>"},{"location":"api-reference/database/#endpoints","title":"Endpoints","text":""},{"location":"api-reference/database/#consulta-en-lenguaje-natural","title":"Consulta en lenguaje natural","text":"<pre><code>POST /api/database/query\n</code></pre> <p>Encabezados: <pre><code>X-API-Key: tu_api_key_aqu\u00ed\nContent-Type: application/json\n</code></pre></p> <p>Cuerpo: <pre><code>{\n  \"query\": \"\u00bfCu\u00e1les son los 5 productos m\u00e1s vendidos este mes?\",\n  \"collection_name\": \"products\",\n  \"limit\": 5,\n  \"metadata\": {\n    \"context\": \"dashboard_sales_report\"\n  }\n}\n</code></pre></p> <p>Respuesta exitosa (200): <pre><code>{\n  \"natural_query\": \"\u00bfCu\u00e1les son los 5 productos m\u00e1s vendidos este mes?\",\n  \"mongo_query\": {\n    \"collection\": \"products\",\n    \"operation\": \"find\",\n    \"query\": {},\n    \"sort\": {\"sales\": -1},\n    \"limit\": 5\n  },\n  \"result\": {\n    \"data\": [\n      {\"_id\": \"prod_123\", \"name\": \"Laptop Pro\", \"sales\": 256},\n      {\"_id\": \"prod_456\", \"name\": \"Smartphone X\", \"sales\": 187},\n      {\"_id\": \"prod_789\", \"name\": \"Tablet Ultra\", \"sales\": 145},\n      {\"_id\": \"prod_012\", \"name\": \"Monitor 4K\", \"sales\": 98},\n      {\"_id\": \"prod_345\", \"name\": \"Auriculares BT\", \"sales\": 87}\n    ],\n    \"count\": 5,\n    \"query_time_ms\": 25.4,\n    \"has_more\": true,\n    \"metadata\": {\n      \"total_count\": 120,\n      \"skip\": 0,\n      \"limit\": 5,\n      \"collection\": \"products\"\n    }\n  },\n  \"explanation\": \"Los 5 productos m\u00e1s vendidos este mes son Laptop Pro (256 unidades), Smartphone X (187 unidades), Tablet Ultra (145 unidades), Monitor 4K (98 unidades) y Auriculares BT (87 unidades). Estos datos representan el top 5 de un total de 120 productos en el cat\u00e1logo.\",\n  \"metadata\": {\n    \"processing_time\": 1.2,\n    \"anthropic_model\": \"claude-3-opus-20240229\"\n  }\n}\n</code></pre></p>"},{"location":"api-reference/database/#obtener-esquema-de-base-de-datos","title":"Obtener esquema de base de datos","text":"<pre><code>GET /api/database/collections\n</code></pre> <p>Encabezados: <pre><code>X-API-Key: tu_api_key_aqu\u00ed\n</code></pre></p> <p>Respuesta exitosa (200): <pre><code>{\n  \"collections\": {\n    \"products\": {\n      \"document_count\": 120,\n      \"schema\": {\n        \"name\": {\n          \"type\": \"string\",\n          \"example\": \"Laptop Pro\"\n        },\n        \"price\": {\n          \"type\": \"number\",\n          \"example\": \"999.99\"\n        },\n        \"category\": {\n          \"type\": \"string\",\n          \"example\": \"electronics\"\n        },\n        \"sales\": {\n          \"type\": \"number\",\n          \"example\": \"256\"\n        }\n      }\n    },\n    \"customers\": {\n      \"document_count\": 5430,\n      \"schema\": {\n        \"name\": {\n          \"type\": \"string\",\n          \"example\": \"John Doe\"\n        },\n        \"email\": {\n          \"type\": \"string\",\n          \"example\": \"john@example.com\"\n        },\n        \"signup_date\": {\n          \"type\": \"date\",\n          \"example\": \"2024-01-15T10:30:00Z\"\n        }\n      }\n    }\n  }\n}\n</code></pre></p>"},{"location":"architecture/components/","title":"Componentes del sistema","text":"<p>CoreBrain se compone de varios m\u00f3dulos especializados que trabajan juntos para proporcionar una experiencia fluida. A continuaci\u00f3n se describen los componentes principales:</p>"},{"location":"architecture/components/#1-modulo-de-autenticacion","title":"1. M\u00f3dulo de autenticaci\u00f3n","text":"<p>Este m\u00f3dulo gestiona:</p> <ul> <li>API Keys: Creaci\u00f3n, validaci\u00f3n y revocaci\u00f3n de claves de API.</li> <li>Tokens JWT: Para autenticaci\u00f3n en el dashboard.</li> <li>Control de permisos: Validaci\u00f3n de niveles de acceso para diferentes operaciones.</li> </ul>"},{"location":"architecture/components/#componentes-clave","title":"Componentes clave","text":"<ul> <li><code>AuthService</code>: Servicio central para operaciones de autenticaci\u00f3n.</li> <li><code>ApiKeyRepository</code>: Gesti\u00f3n de almacenamiento y recuperaci\u00f3n de API keys.</li> <li><code>PermissionsManager</code>: Verificaci\u00f3n de permisos para diferentes acciones.</li> </ul>"},{"location":"architecture/components/#2-modulo-de-chat","title":"2. M\u00f3dulo de chat","text":"<p>Gestiona el flujo conversacional entre usuarios y la IA:</p> <ul> <li>Conversaciones: Creaci\u00f3n y gesti\u00f3n de hilos conversacionales.</li> <li>Mensajes: Procesamiento de mensajes entrantes y salientes.</li> <li>Historial: Mantenimiento del contexto de la conversaci\u00f3n.</li> </ul>"},{"location":"architecture/components/#componentes-clave_1","title":"Componentes clave","text":"<ul> <li><code>ChatService</code>: Coordina el procesamiento de mensajes.</li> <li><code>ConversationRepository</code>: Almacenamiento y recuperaci\u00f3n de conversaciones.</li> <li><code>MessageRepository</code>: Gesti\u00f3n de mensajes individuales.</li> </ul>"},{"location":"architecture/components/#3-modulo-de-procesamiento-de-ia","title":"3. M\u00f3dulo de procesamiento de IA","text":"<p>Puente entre el lenguaje natural y los modelos de IA:</p> <ul> <li>Cliente Anthropic: Conexi\u00f3n con la API de Claude.</li> <li>Gesti\u00f3n de prompts: Creaci\u00f3n de instrucciones efectivas para la IA.</li> <li>Procesamiento de respuestas: Extracci\u00f3n y formateo de las respuestas.</li> </ul>"},{"location":"architecture/components/#componentes-clave_2","title":"Componentes clave","text":"<ul> <li><code>AIService</code>: Gesti\u00f3n de interacciones con Anthropic Claude.</li> <li><code>PromptManager</code>: Construcci\u00f3n y optimizaci\u00f3n de prompts del sistema.</li> <li><code>ResponseProcessor</code>: Procesamiento y filtrado de respuestas.</li> </ul>"},{"location":"architecture/components/#4-modulo-de-base-de-datos","title":"4. M\u00f3dulo de base de datos","text":"<p>Permite la interacci\u00f3n entre la IA y las bases de datos:</p> <ul> <li>Conexiones MongoDB: Gesti\u00f3n de conexiones a bases de datos.</li> <li>Procesamiento de consultas: Traducci\u00f3n de lenguaje natural a operaciones MongoDB.</li> <li>Sanitizaci\u00f3n: Validaci\u00f3n y sanitizaci\u00f3n de consultas.</li> </ul>"},{"location":"architecture/components/#componentes-clave_3","title":"Componentes clave","text":"<ul> <li><code>DatabaseService</code>: Interfaz principal para operaciones de base de datos.</li> <li><code>QueryTranslator</code>: Conversi\u00f3n de consultas en lenguaje natural a MongoDB.</li> <li><code>ResultFormatter</code>: Formateo de resultados para su consumo.</li> </ul>"},{"location":"architecture/components/#5-modulo-de-analiticas","title":"5. M\u00f3dulo de anal\u00edticas","text":"<p>Seguimiento y an\u00e1lisis del uso del sistema:</p> <ul> <li>Tracking de eventos: Registro de eventos importantes.</li> <li>M\u00e9tricas de uso: Seguimiento de consumo de tokens y consultas.</li> <li>Costos: C\u00e1lculo de costos asociados al uso.</li> </ul>"},{"location":"architecture/components/#componentes-clave_4","title":"Componentes clave","text":"<ul> <li><code>AnalyticsService</code>: Coordinaci\u00f3n de recopilaci\u00f3n y procesamiento de anal\u00edticas.</li> <li><code>EventTracker</code>: Registro de eventos importantes del sistema.</li> <li><code>CostCalculator</code>: Estimaci\u00f3n y seguimiento de costos de API.</li> </ul>"},{"location":"architecture/components/#6-sdk","title":"6. SDK","text":"<p>Biblioteca cliente para integraci\u00f3n con aplicaciones:</p> <ul> <li>Cliente API: Conexi\u00f3n con los endpoints de la API.</li> <li>Gesti\u00f3n de cach\u00e9: Optimizaci\u00f3n de rendimiento mediante cach\u00e9 local.</li> <li>Gesti\u00f3n de errores: Manejo unificado de errores y reintentos.</li> </ul>"},{"location":"architecture/components/#componentes-clave_5","title":"Componentes clave","text":"<ul> <li><code>CoreBrainClient</code>: Clase principal para interactuar con la API.</li> <li><code>ConversationManager</code>: Gesti\u00f3n de conversaciones desde el cliente.</li> <li><code>MessageManager</code>: Env\u00edo y recepci\u00f3n de mensajes.</li> </ul>"},{"location":"architecture/data-flow/","title":"Flujo de datos","text":"<p>Esta secci\u00f3n explica en detalle c\u00f3mo fluyen los datos a trav\u00e9s de los diferentes componentes de CoreBrain, desde la solicitud inicial hasta la respuesta final.</p>"},{"location":"architecture/data-flow/#procesamiento-de-mensajes","title":"Procesamiento de mensajes","text":""},{"location":"architecture/data-flow/#1-solicitud-del-cliente","title":"1. Solicitud del cliente","text":"<p>El flujo comienza cuando una aplicaci\u00f3n cliente env\u00eda un mensaje utilizando el SDK de CoreBrain:</p> <pre><code>const response = await client.messages.send({\n  conversationId: \"conv_123\",\n  content: \"\u00bfCu\u00e1ntos usuarios se registraron la semana pasada?\"\n});\n</code></pre>"},{"location":"architecture/data-flow/#2-validacion-y-autenticacion","title":"2. Validaci\u00f3n y autenticaci\u00f3n","text":"<p>Cuando la solicitud llega a la API:</p> <ol> <li>Se verifica la API key en el encabezado <code>X-API-Key</code>.</li> <li>Se comprueban los permisos para la operaci\u00f3n solicitada.</li> <li>Se valida el formato y contenido de la solicitud.</li> </ol>"},{"location":"architecture/data-flow/#3-procesamiento-contextual","title":"3. Procesamiento contextual","text":"<p>El servicio de chat:</p> <ol> <li>Recupera la conversaci\u00f3n especificada o crea una nueva.</li> <li>Obtiene el historial de mensajes previos para contexto.</li> <li>Guarda el mensaje del usuario en la base de datos.</li> </ol>"},{"location":"architecture/data-flow/#4-analisis-de-la-consulta","title":"4. An\u00e1lisis de la consulta","text":"<p>El sistema determina si el mensaje requiere acceso a la base de datos:</p> <ol> <li>Analiza el contenido del mensaje buscando palabras clave.</li> <li>Si es necesario, recupera informaci\u00f3n sobre las colecciones disponibles.</li> <li>Prepara el contexto para el modelo de IA.</li> </ol>"},{"location":"architecture/data-flow/#5-interaccion-con-la-ia","title":"5. Interacci\u00f3n con la IA","text":"<p>El servicio de IA:</p> <ol> <li>Construye un prompt para Claude con el mensaje, historial y contexto de la base de datos.</li> <li>Env\u00eda la solicitud a la API de Anthropic.</li> <li>Claude genera una respuesta que puede incluir consultas MongoDB.</li> </ol>"},{"location":"architecture/data-flow/#6-ejecucion-de-consultas-si-es-necesario","title":"6. Ejecuci\u00f3n de consultas (si es necesario)","text":"<p>Si Claude sugiere una consulta MongoDB:</p> <ol> <li>El sistema extrae la consulta de la respuesta.</li> <li>Sanitiza la consulta para prevenir operaciones maliciosas.</li> <li>Ejecuta la consulta contra la base de datos especificada.</li> <li>Formatea los resultados para enviarlos de vuelta a Claude.</li> </ol>"},{"location":"architecture/data-flow/#7-generacion-de-la-respuesta-final","title":"7. Generaci\u00f3n de la respuesta final","text":"<p>Con los resultados de la consulta:</p> <ol> <li>Se genera un nuevo prompt para Claude incluyendo los resultados.</li> <li>Claude interpreta los datos y genera una respuesta final.</li> <li>El sistema guarda la respuesta en la base de datos.</li> <li>Se calcula y registra el costo de la operaci\u00f3n.</li> </ol>"},{"location":"architecture/data-flow/#8-retorno-al-cliente","title":"8. Retorno al cliente","text":"<p>Finalmente:</p> <ol> <li>La respuesta se formatea seg\u00fan la especificaci\u00f3n de la API.</li> <li>Se env\u00eda de vuelta al cliente a trav\u00e9s del SDK.</li> <li>Se actualizan las m\u00e9tricas y anal\u00edticas.</li> </ol>"},{"location":"architecture/data-flow/#flujo-de-tokens-y-costos","title":"Flujo de tokens y costos","text":"<p>Cada interacci\u00f3n con Claude consume tokens que tienen un costo asociado. CoreBrain realiza un seguimiento detallado de este consumo:</p> <ol> <li>Se cuentan los tokens de entrada (prompt) y salida (respuesta).</li> <li>Se calcula el costo en USD basado en las tarifas actuales de Anthropic.</li> <li>Los costos se almacenan asociados a la conversaci\u00f3n.</li> <li>Se actualizan las m\u00e9tricas globales para facturaci\u00f3n y anal\u00edticas.</li> </ol>"},{"location":"architecture/data-flow/#optimizaciones-de-rendimiento","title":"Optimizaciones de rendimiento","text":"<p>CoreBrain implementa varias optimizaciones para mejorar el rendimiento y reducir costos:</p> <ol> <li>Cach\u00e9: Las respuestas frecuentes se almacenan en cach\u00e9 para evitar llamadas innecesarias a Claude.</li> <li>An\u00e1lisis previo: El sistema analiza si un mensaje requiere acceso a la base de datos antes de consultar a Claude.</li> <li>Limitaci\u00f3n de contexto: Solo se env\u00eda la informaci\u00f3n relevante a Claude para reducir el consumo de tokens.</li> <li>Procesamiento en paralelo: Las consultas a la base de datos se pueden ejecutar en paralelo cuando es posible.</li> </ol>"},{"location":"architecture/overview/","title":"Visi\u00f3n general de la arquitectura","text":"<p>CoreBrain utiliza una arquitectura modular y escalable dise\u00f1ada para procesar consultas en lenguaje natural, interactuar con bases de datos MongoDB y proporcionar respuestas contextuales utilizando modelos de lenguaje avanzados.</p>"},{"location":"architecture/overview/#arquitectura-general","title":"Arquitectura general","text":"<p>El sistema est\u00e1 dividido en tres componentes principales:</p> <ol> <li>api.corebrain.ai: El backend basado en FastAPI que procesa las solicitudes, gestiona la autenticaci\u00f3n y se comunica con servicios externos.</li> <li>dashboard.corebrain.ai: La interfaz de administraci\u00f3n para que los usuarios gestionen su cuenta, API keys y anal\u00edticas.</li> <li>sdk.corebrain.ai: El SDK que permite a los desarrolladores integrar f\u00e1cilmente CoreBrain en sus aplicaciones.</li> </ol>"},{"location":"architecture/overview/#flujo-de-datos","title":"Flujo de datos","text":"<ol> <li>La aplicaci\u00f3n cliente env\u00eda una solicitud a trav\u00e9s del SDK de CoreBrain.</li> <li>El SDK formatea la solicitud y la env\u00eda a la API.</li> <li>La API autentica la solicitud y verifica los permisos.</li> <li>Si la solicitud implica una consulta a la base de datos, se procesa a trav\u00e9s del motor de procesamiento natural a MongoDB.</li> <li>El resultado se combina con el contexto de la conversaci\u00f3n y se env\u00eda al modelo de lenguaje (Claude).</li> <li>La respuesta del modelo se procesa y se devuelve al cliente.</li> </ol>"},{"location":"architecture/overview/#componentes-tecnologicos","title":"Componentes tecnol\u00f3gicos","text":""},{"location":"architecture/overview/#backend-api","title":"Backend (API)","text":"<ul> <li>FastAPI: Framework web r\u00e1pido para construir APIs con Python 3.7+</li> <li>Motor/PyMongo: Cliente asincr\u00f3nico de MongoDB para Python</li> <li>Anthropic SDK: Cliente oficial para interactuar con la API de Claude</li> <li>Redis: Para cach\u00e9 y limitaci\u00f3n de tasa</li> <li>Pydantic: Validaci\u00f3n de datos y configuraci\u00f3n</li> </ul>"},{"location":"architecture/overview/#frontend-dashboard","title":"Frontend (Dashboard)","text":"<ul> <li>React/Next.js: Framework de frontend para la interfaz de usuario</li> <li>TypeScript: Tipado est\u00e1tico para mejorar la calidad del c\u00f3digo</li> <li>TailwindCSS: Framework CSS para el dise\u00f1o</li> <li>React Query: Gesti\u00f3n de estado del lado del servidor</li> <li>Recharts: Biblioteca para visualizaci\u00f3n de datos</li> </ul>"},{"location":"architecture/overview/#sdk","title":"SDK","text":"<ul> <li>JavaScript/TypeScript: SDK principal para aplicaciones web</li> <li>Python: SDK para aplicaciones backend y an\u00e1lisis de datos</li> <li>Node.js: SDK para aplicaciones servidor</li> </ul>"},{"location":"architecture/overview/#seguridad","title":"Seguridad","text":"<p>CoreBrain implementa varias capas de seguridad:</p> <ul> <li>API Keys con niveles de permiso: Cada API key tiene un nivel espec\u00edfico de acceso (read, write, admin).</li> <li>Sanitizaci\u00f3n de consultas: Todas las consultas MongoDB son sanitizadas para prevenir inyecciones.</li> <li>Control de acceso a colecciones: Las API keys solo pueden acceder a colecciones espec\u00edficas.</li> <li>Rate limiting: Limitaci\u00f3n de solicitudes para prevenir abusos.</li> <li>Encriptaci\u00f3n en tr\u00e1nsito: Todas las comunicaciones utilizan HTTPS/TLS.</li> <li>Logging extensivo: Registro detallado de todas las operaciones para auditor\u00eda.</li> </ul>"}]}